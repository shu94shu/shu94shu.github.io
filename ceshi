<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ”ç©¶ç”Ÿè°ˆå¿ƒè°ˆè¯é‡ç‚¹å¯¹è±¡æ¸¸æˆåŒ–æ™®æŸ¥é—®å·</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        .game-content {
            padding: 30px;
        }
        .screen {
            display: none;
        }
        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .start-screen {
            text-align: center;
            padding: 40px 20px;
        }
        .start-screen img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin-bottom: 25px;
            border-radius: 50%;
            background: #eef2f7;
            padding: 15px;
        }
        .start-screen h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .start-screen p {
            margin-bottom: 30px;
            color: #555;
            font-size: 1.1em;
            line-height: 1.7;
        }
        .btn {
            background: linear-gradient(90deg, #4cc9f0 0%, #4361ee 100%);
            color: white;
            border: none;
            padding: 14px 35px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }
        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .question-screen {
            padding: 20px 0;
        }
        .stage-title {
            background: #e9ecef;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-weight: bold;
            color: #2c3e50;
            border-left: 5px solid #4361ee;
        }
        .question {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px dashed #eee;
        }
        .question:last-child {
            border-bottom: none;
        }
        .question p {
            font-size: 1.2em;
            margin-bottom: 18px;
            color: #2b2d42;
            line-height: 1.5;
        }
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        .option:hover {
            background: #edf2f7;
            border-color: #4cc9f0;
        }
        .option.selected {
            background: #e3f2fd;
            border-color: #4361ee;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        .option input {
            display: none;
        }
        .option-label {
            display: flex;
            align-items: flex-start;
        }
        .option-icon {
            font-size: 1.4em;
            margin-right: 12px;
            min-width: 24px;
        }
        .next-btn-container {
            text-align: center;
            margin-top: 20px;
        }
        .note {
            background: #fff8e1;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
            font-size: 0.95em;
            color: #5d4037;
        }
        .result-screen {
            text-align: center;
            padding: 30px 20px;
        }
        .score-display {
            font-size: 5em;
            font-weight: bold;
            background: linear-gradient(90deg, #06d6a0 0%, #118ab2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .level {
            font-size: 2.5em;
            margin: 25px 0;
            color: #2b2d42;
        }
        .report {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            text-align: left;
            margin: 25px 0;
            line-height: 1.8;
        }
        .report h3 {
            color: #4361ee;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        .report p {
            margin-bottom: 15px;
            color: #495057;
        }
        .achievements {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }
        .achievement {
            display: none;
            flex-direction: column;
            align-items: center;
            background: #e3f2fd;
            border: 2px solid #4361ee;
            border-radius: 10px;
            padding: 15px;
            width: 140px;
            transition: all 0.3s ease;
        }
        .achievement.unlocked {
            display: flex;
        }
        .achievement img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            margin-bottom: 8px;
        }
        .achievement h4 {
            font-size: 1.1em;
            margin: 0;
            color: #4361ee;
        }
        .restart-btn {
            background: linear-gradient(90deg, #ff9e00 0%, #ff6b00 100%);
            margin-top: 10px;
        }
        .hidden-input {
            margin-top: 10px;
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
        }
        .multi-select {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .multi-option {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .multi-option.selected {
            background: #e3f2fd;
            border: 2px solid #4361ee;
        }
        .progress-container {
            width: 100%;
            background: #e9ecef;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            height: 10px;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4cc9f0 0%, #4361ee 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        .stage-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9em;
            color: #6c757d;
        }
        .info-form {
            max-width: 500px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2b2d42;
        }
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
        }
        .info-screen {
            padding: 20px 0;
        }
        .character-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
        }
        .character-preview h4 {
            margin-bottom: 10px;
            color: #4361ee;
        }
        .character-preview p {
            margin: 5px 0;
            color: #495057;
        }
        .error-message {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }
        /* æ–°å¢çš„æ•°æ®æ”¶é›†ç›¸å…³æ ·å¼ */
        .data-collection-screen {
            text-align: center;
            padding: 30px 20px;
        }
        .submit-btn {
            background: linear-gradient(90deg, #06d6a0 0%, #118ab2 100%);
            margin-top: 20px;
        }
        .data-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
            font-size: 0.9em;
            color: #495057;
        }
        .copy-btn {
            background: linear-gradient(90deg, #ff9e00 0%, #ff6b00 100%);
            margin: 10px;
        }
        .download-btn {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            margin: 10px;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }
        .alert.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .alert.info {
            background: #cce5ff;
            color: #004085;
            border: 1px solid #b8daff;
        }
        .data-preview {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.85em;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ç ”ç©¶ç”Ÿè°ˆå¿ƒè°ˆè¯é‡ç‚¹å¯¹è±¡æ¸¸æˆåŒ–æ™®æŸ¥é—®å·</h1>
            <p>é€šè¿‡æ¸¸æˆåŒ–é—¯å…³ï¼Œè½»æ¾å®Œæˆå¿ƒç†ä¸ç”Ÿæ´»çŠ¶æ€è¯„ä¼°</p>
        </div>
        <div class="game-content">
            <!-- å¼€å§‹å±å¹• -->
            <div id="start-screen" class="screen active">
                <div class="start-screen">
                    <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="æ¸¸æˆåŒ–é—®å·">
                    <h2>å¼€å¯ä½ çš„æ ¡å›­ç”Ÿå­˜æŒ‘æˆ˜</h2>
                    <p>æœ¬é—®å·ä»¥æ¸¸æˆåŒ–å½¢å¼è®¾è®¡ï¼Œå…±10å…³æŒ‘æˆ˜ï¼Œå¸®ä½ å…¨é¢è¯„ä¼°å­¦ä¹ ã€ç”Ÿæ´»ã€å¿ƒç†çŠ¶æ€ã€‚<br>æ‰€æœ‰æ•°æ®ä»…ç”¨äºå­¦æ ¡å…³æ€€æ”¯æŒï¼Œä¸¥æ ¼ä¿å¯†ï¼Œè¯·æ”¾å¿ƒå¡«å†™ã€‚</p>
                    <button id="start-btn" class="btn">å¼€å§‹é—¯å…³</button>
                </div>
            </div>

            <!-- ä¿¡æ¯å¡«å†™å±å¹• -->
            <div id="info-screen" class="screen">
                <div class="info-screen">
                    <h2 style="text-align: center; color: #2c3e50; margin-bottom: 25px;">è§’è‰²åˆ›å»º</h2>
                    <p style="text-align: center; margin-bottom: 25px; color: #555;">è¯·å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼Œåˆ›å»ºä½ çš„æ ¡å›­ç”Ÿå­˜è§’è‰²</p>
                    
                    <div class="info-form">
                        <div class="form-group">
                            <label for="student-id">å­¦å· *</label>
                            <input type="text" id="student-id" placeholder="è¯·è¾“å…¥8ä½å­¦å·">
                            <div class="error-message" id="student-id-error">è¯·è¾“å…¥æœ‰æ•ˆçš„8ä½å­¦å·</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="name">å§“å *</label>
                            <input type="text" id="name" placeholder="è¯·è¾“å…¥å§“å">
                            <div class="error-message" id="name-error">è¯·è¾“å…¥å§“å</div>
                        </div>
                        
                        <div class="form-group">
                            <label>æ€§åˆ« *</label>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                                <div class="option" data-value="ç”·">
                                    <div class="option-label">
                                        <span class="option-icon">ğŸš¹</span>
                                        <span>ç”·</span>
                                    </div>
                                </div>
                                <div class="option" data-value="å¥³">
                                    <div class="option-label">
                                        <span class="option-icon">ğŸšº</span>
                                        <span>å¥³</span>
                                    </div>
                                </div>
                                <div class="option" data-value="å…¶ä»–">
                                    <div class="option-label">
                                        <span class="option-icon">âš§ï¸</span>
                                        <span>å…¶ä»–</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="grade">å¹´çº§ *</label>
                            <select id="grade">
                                <option value="">è¯·é€‰æ‹©å¹´çº§</option>
                                <option value="ç¡•å£«ä¸€å¹´çº§">ç¡•å£«ä¸€å¹´çº§</option>
                                <option value="ç¡•å£«äºŒå¹´çº§">ç¡•å£«äºŒå¹´çº§</option>
                                <option value="ç¡•å£«ä¸‰å¹´çº§">ç¡•å£«ä¸‰å¹´çº§</option>
                                <option value="åšå£«ä¸€å¹´çº§">åšå£«ä¸€å¹´çº§</option>
                                <option value="åšå£«äºŒå¹´çº§">åšå£«äºŒå¹´çº§</option>
                                <option value="åšå£«ä¸‰å¹´çº§">åšå£«ä¸‰å¹´çº§</option>
                                <option value="åšå£«å››å¹´çº§åŠä»¥ä¸Š">åšå£«å››å¹´çº§åŠä»¥ä¸Š</option>
                            </select>
                            <div class="error-message" id="grade-error">è¯·é€‰æ‹©å¹´çº§</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="college">å­¦é™¢ *</label>
                            <input type="text" id="college" placeholder="è¯·è¾“å…¥å­¦é™¢åç§°">
                            <div class="error-message" id="college-error">è¯·è¾“å…¥å­¦é™¢åç§°</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="major">ä¸“ä¸š *</label>
                            <input type="text" id="major" placeholder="è¯·è¾“å…¥ä¸“ä¸šåç§°">
                            <div class="error-message" id="major-error">è¯·è¾“å…¥ä¸“ä¸šåç§°</div>
                        </div>
                        
                        <div class="character-preview">
                            <h4>ä½ çš„è§’è‰²é¢„è§ˆ</h4>
                            <p><strong>èº«ä»½ï¼š</strong> <span id="preview-role">ç ”ç©¶ç”Ÿ</span></p>
                            <p><strong>å­¦é™¢ä¸“ä¸šï¼š</strong> <span id="preview-college-major">æœªè®¾ç½®</span></p>
                            <p><strong>å¹´çº§ï¼š</strong> <span id="preview-grade">æœªè®¾ç½®</span></p>
                        </div>
                        
                        <div class="next-btn-container">
                            <button id="info-next-btn" class="btn" disabled>åˆ›å»ºè§’è‰²å¹¶å¼€å§‹é—¯å…³</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é—®é¢˜å±å¹• -->
            <div id="question-screen" class="screen">
                <div class="question-screen">
                    <div class="stage-indicator">
                        <span>å…³å¡: <span id="current-stage">1</span>/10</span>
                        <span>å¾—åˆ†: <span id="current-score">20</span></span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div id="stage-title" class="stage-title"></div>
                    <div id="questions-container"></div>
                    <div class="next-btn-container">
                        <button id="next-btn" class="btn" disabled>è¿›å…¥ä¸‹ä¸€å…³</button>
                    </div>
                    <div id="note-container" class="note" style="display:none;"></div>
                </div>
            </div>

            <!-- ç»“ç®—å±å¹• -->
            <div id="result-screen" class="screen">
                <div class="result-screen">
                    <h2>é—¯å…³ç»“ç®—ï¼šç”Ÿå­˜ç­‰çº§ä¸å¾—åˆ†æŠ¥å‘Š</h2>
                    <div class="score-display" id="final-score">--</div>
                    <div class="level" id="survival-level">è®¡ç®—ä¸­...</div>
                    
                    <div class="report">
                        <h3>ä½ çš„æ ¡å›­ç”Ÿå­˜çŠ¶æ€åˆ†æ</h3>
                        <p id="report-text"></p>
                    </div>
                    
                    <h3 style="color: #2c3e50; margin: 25px 0 15px;">ä½ è·å¾—çš„æˆå°±</h3>
                    <div class="achievements">
                        <div class="achievement" id="family-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="å®¶åº­å’Œç¦æ˜Ÿ">
                            <h4>å®¶åº­å’Œç¦æ˜Ÿ</h4>
                        </div>
                        <div class="achievement" id="ideology-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="æ€æƒ³é¢†èˆªå‘˜">
                            <h4>æ€æƒ³é¢†èˆªå‘˜</h4>
                        </div>
                        <div class="achievement" id="research-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="ç§‘ç ”å¤§ä½¬">
                            <h4>ç§‘ç ”å¤§ä½¬</h4>
                        </div>
                        <div class="achievement" id="mentor-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="å¯¼å­¦é»˜å¥‘ç‹">
                            <h4>å¯¼å­¦é»˜å¥‘ç‹</h4>
                        </div>
                        <div class="achievement" id="social-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="äººé™…å°å¤ªé˜³">
                            <h4>äººé™…å°å¤ªé˜³</h4>
                        </div>
                        <div class="achievement" id="career-achievement">
                            <img src="https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png" alt="èŒä¸šè§„åˆ’å¸ˆ">
                            <h4>èŒä¸šè§„åˆ’å¸ˆ</h4>
                        </div>
                    </div>
                    
                    <button id="submit-data-btn" class="btn submit-btn">æäº¤é—®å·æ•°æ®</button>
                    <button id="restart-btn" class="btn restart-btn">é‡æ–°å¼€å§‹</button>
                    <p style="margin-top: 20px; color: #6c757d; font-size: 0.9em;">æäº¤åæ•°æ®å°†è¢«ä¿å­˜ï¼Œå­¦æ ¡å°†æ ¹æ®ç»“æœæä¾›é’ˆå¯¹æ€§æ”¯æŒ</p>
                </div>
            </div>

            <!-- æ•°æ®æ”¶é›†å±å¹• -->
            <div id="data-collection-screen" class="screen">
                <div class="data-collection-screen">
                    <h2>é—®å·æäº¤æˆåŠŸï¼</h2>
                    <div class="alert success" id="success-alert">
                        âœ… ä½ çš„é—®å·æ•°æ®å·²æˆåŠŸä¿å­˜ï¼
                    </div>
                    
                    <div class="data-info">
                        <h3>æ•°æ®æ”¶é›†ä¿¡æ¯</h3>
                        <p><strong>å­¦å·ï¼š</strong> <span id="data-student-id"></span></p>
                        <p><strong>å§“åï¼š</strong> <span id="data-name"></span></p>
                        <p><strong>å¾—åˆ†ï¼š</strong> <span id="data-score"></span></p>
                        <p><strong>ç”Ÿå­˜ç­‰çº§ï¼š</strong> <span id="data-level"></span></p>
                        <p><strong>æäº¤æ—¶é—´ï¼š</strong> <span id="data-time"></span></p>
                    </div>
                    
                    <div class="alert info" id="info-alert">
                        ğŸ“‹ ä½ å¯ä»¥å¤åˆ¶ä¸‹é¢çš„æ•°æ®ï¼Œæˆ–ä¸‹è½½JSONæ–‡ä»¶
                    </div>
                    
                    <div class="data-preview" id="data-preview">
                        æ•°æ®åŠ è½½ä¸­...
                    </div>
                    
                    <div>
                        <button id="copy-data-btn" class="btn copy-btn">å¤åˆ¶æ•°æ®</button>
                        <button id="download-json-btn" class="btn download-btn">ä¸‹è½½JSONæ–‡ä»¶</button>
                        <button id="view-all-btn" class="btn">æŸ¥çœ‹æ‰€æœ‰å·²æäº¤æ•°æ®</button>
                        <button id="back-to-start-btn" class="btn">è¿”å›é¦–é¡µ</button>
                    </div>
                    
                    <div class="alert error" id="error-alert" style="display:none;">
                        å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä¸Šé¢çš„æ•°æ®
                    </div>
                </div>
            </div>

            <!-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®å±å¹• -->
            <div id="view-data-screen" class="screen">
                <div class="data-collection-screen">
                    <h2>å·²æäº¤çš„é—®å·æ•°æ®</h2>
                    
                    <div class="data-info">
                        <p>æ€»æäº¤äººæ•°ï¼š<span id="total-submissions">0</span></p>
                        <p>å¹³å‡å¾—åˆ†ï¼š<span id="average-score">0</span></p>
                        <p>é«˜é£é™©äººæ•°ï¼š<span id="high-risk-count">0</span></p>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <button id="export-csv-btn" class="btn download-btn">å¯¼å‡ºCSVæ–‡ä»¶</button>
                        <button id="back-to-data-btn" class="btn">è¿”å›ä¸Šä¸€é¡µ</button>
                    </div>
                    
                    <div class="data-preview" id="all-data-preview">
                        æ•°æ®åŠ è½½ä¸­...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®å®šä¹‰ - å®Œæ•´10å…³
        const quizData = [
            {
                id: 'family',
                title: 'ç¬¬ä¸€å…³ï¼šå®¶åº­æ¸¯æ¹¾ï¼ˆå®¶åº­å…³ç³»ç»´åº¦ãƒ»ç»´åº¦åˆ† 5åˆ†)',
                questions: [
                    {
                        text: 'æœ€è¿‘å®¶é‡Œæ˜¯å¦å‡ºç° "å‰§æƒ…åè½¬"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ¡ å²æœˆé™å¥½ï¼šæ— ä»»ä½•å˜æ•…', score: 3, risk: 0, icon: 'ğŸ¡' },
                            { text: 'ğŸŒŠ å°æ³¢æ¾œï¼šæœ‰å°å˜åŒ–ä½†"é—®é¢˜ä¸å¤§"', score: 1, risk: 0, icon: 'ğŸŒŠ' },
                            { text: 'ğŸŒªï¸ å¤§é£æš´ï¼šæœ‰é‡å¤§å˜æ•…ï¼Œæ„Ÿè§‰"å¤©éƒ½è¦å¡Œäº†"', score: 0, risk: 3, icon: 'ğŸŒªï¸' }
                        ]
                    },
                    {
                        text: 'ä½ å’Œçˆ¶æ¯çš„èŠå¤©æ¨¡å¼æ˜¯ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“± æ— è¯ä¸è°ˆï¼šæ¯å¤©éƒ½è¦ "è§†é¢‘é€šè¯"', score: 2, risk: 0, icon: 'ğŸ“±' },
                            { text: 'ğŸ“… å¶å°”è”ç³»ï¼šèŠ‚æ—¥é—®å€™ï¼Œ"æŠ¥å–œä¸æŠ¥å¿§"', score: 1, risk: 0, icon: 'ğŸ“…' },
                            { text: 'ğŸ”‡ åŸºæœ¬ä¸èŠï¼š"è¯ä¸æŠ•æœºåŠå¥å¤š"', score: 0, risk: 0, icon: 'ğŸ”‡' }
                        ]
                    }
                ]
            },
            {
                id: 'ideology',
                title: 'ç¬¬äºŒå…³ï¼šæ€æƒ³é¢†èˆªï¼ˆæ€æƒ³æ”¿æ²»ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ†)',
                questions: [
                    {
                        text: 'å¦‚æœç†è®ºå­¦ä¹ æ˜¯ä¸€åœºç›´æ’­ï¼Œä½ æ˜¯å“ªç§è§‚ä¼—ï¼Ÿ',
                        options: [
                            { text: 'ğŸš¶â€â™€ï¸ ä»ä¸çœ‹ç›´æ’­ï¼Œç›´æ¥åˆ’èµ°', score: 0, risk: 0, icon: 'ğŸš¶â€â™€ï¸' },
                            { text: 'ğŸ• å¶å°”è·¯è¿‡ï¼Œåœç•™å‡ ç§’', score: 1, risk: 0, icon: 'ğŸ•' },
                            { text: 'âœ… å®šæœŸæ‰“å¡ï¼Œå‡†æ—¶ç­¾åˆ°', score: 3, risk: 0, icon: 'âœ…' }
                        ]
                    },
                    {
                        text: 'æœ€è¿‘ä½ æ˜¯å¦å¯¹ä¸€äº›å¤§å®¶ä¹ ä»¥ä¸ºå¸¸çš„äº‹æƒ…äº§ç”Ÿäº† "æ–°æƒ³æ³•"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ§˜ å®Œå…¨æ²¡æœ‰ï¼Œæˆ‘å¾ˆ "ç¨³"', score: 3, risk: 0, icon: 'ğŸ§˜' },
                            { text: 'ğŸ¤” å¶å°”æœ‰ï¼Œä½†å¾ˆå¿«å°± "ä¸‹å¤´" äº†', score: 1, risk: 0, icon: 'ğŸ¤”' },
                            { text: 'ğŸ˜µ ç»å¸¸æœ‰ï¼Œæ„Ÿè§‰ "æ•´ä¸ªäººéƒ½ä¸å¥½äº†"', score: 0, risk: 0, icon: 'ğŸ˜µ' }
                        ]
                    },
                    {
                        text: 'ä½ æ˜¯å¦æ›¾åœ¨ç½‘ä¸Šå‘è¡¨è¿‡è®©è‡ªå·± "ç¤¾æ­»" çš„è¨€è®ºï¼Ÿ',
                        options: [
                            { text: 'ğŸ„ ä»æ¥æ²¡æœ‰ï¼Œæˆ‘æ˜¯ "ç½‘ä¸Šå†²æµªå°èƒ½æ‰‹"', score: 2, risk: 0, icon: 'ğŸ„' },
                            { text: 'ğŸ˜… æœ‰è¿‡ä¸€æ¬¡ï¼Œç°åœ¨æƒ³æƒ³ "è„šè¶¾æŠ å‡ºä¸‰å®¤ä¸€å…"', score: 1, risk: 0, icon: 'ğŸ˜…' },
                            { text: 'ğŸ«£ å¤šæ¬¡ï¼Œå·²ç» "æ²¡è„¸è§äºº" äº†', score: 0, risk: 0, icon: 'ğŸ«£' }
                        ]
                    }
                ],
                achievement: 'æ€æƒ³é¢†èˆªå‘˜'
            },
            {
                id: 'research',
                title: 'ç¬¬ä¸‰å…³ï¼šç§‘ç ”æ‰“æ€ªï¼ˆå­¦ä¹ ç§‘ç ”ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ† + é£é™©æ‰£åˆ†å…³è”)',
                questions: [
                    {
                        text: 'å¦‚æœç§‘ç ”æ˜¯ä¸€åœºæ¸¸æˆï¼Œä½ ç°åœ¨å¡åœ¨ç¬¬å‡ å…³ï¼Ÿ',
                        options: [
                            { text: 'ğŸ‰ ç¬¬ä¸€å…³ï¼šæ–°æ‰‹æ‘ï¼Œä¸€åˆ‡é¡ºåˆ©', score: 3, risk: 0, icon: 'ğŸ‰' },
                            { text: 'ğŸ› ï¸ ä¸­é—´å…³å¡ï¼šæœ‰ç‚¹éš¾åº¦ï¼Œä½†è¿˜èƒ½ "è‚"', score: 1, risk: 0, icon: 'ğŸ› ï¸' },
                            { text: 'ğŸš« æœ€ç»ˆ BOSSï¼šå®Œå…¨æ‰“ä¸è¿‡ï¼Œæƒ³ "åˆ å·é‡ç»ƒ"', score: 0, risk: 0, icon: 'ğŸš«' }
                        ]
                    },
                    {
                        text: 'ä½ çš„ç§‘ç ”å‹åŠ›è¾¾åˆ°äº†å“ªä¸ª "å¢ƒç•Œ"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ¥‰ é’é“œï¼šå°åœºé¢ï¼Œæ¯«æ— å‹åŠ›', score: 3, risk: 0, icon: 'ğŸ¥‰' },
                            { text: 'ğŸ¥ˆ é»„é‡‘ï¼šæœ‰ç‚¹éš¾ï¼Œä½†è¿˜èƒ½ "è‹Ÿä½"', score: 1, risk: 0, icon: 'ğŸ¥ˆ' },
                            { text: 'ğŸ¥‡ ç‹è€…ï¼šå‹åŠ›å±±å¤§ï¼Œæ„Ÿè§‰è¦ "ç ´é˜²" äº†', score: 0, risk: 3, icon: 'ğŸ¥‡' }
                        ]
                    },
                    {
                        text: 'æœ€è¿‘ä½ çš„å®éªŒ / è®ºæ–‡æ˜¯å¦é‡åˆ°äº† "ç„å­¦" é—®é¢˜ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“œ æ²¡æœ‰ï¼Œä¸€åˆ‡æŒ‰ "å‰§æœ¬" èµ°', score: 2, risk: 0, icon: 'ğŸ“œ' },
                            { text: 'ğŸ”„ å¶å°”æœ‰ï¼Œéœ€è¦ "é‡å¯" ä¸€ä¸‹', score: 1, risk: 0, icon: 'ğŸ”„' },
                            { text: 'ğŸ§Ÿ ç»å¸¸æœ‰ï¼Œæ„Ÿè§‰è¢« "è¯…å’’" äº†', score: 0, risk: 0, icon: 'ğŸ§Ÿ' }
                        ]
                    }
                ],
                achievement: 'ç§‘ç ”å¤§ä½¬'
            },
            {
                id: 'mentor',
                title: 'ç¬¬å››å…³ï¼šå¯¼å¸ˆè”åŠ¨ï¼ˆå¯¼å­¦å…³ç³»ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ†)',
                questions: [
                    {
                        text: 'ä½ å’Œå¯¼å¸ˆçš„èŠå¤©æ¡†æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Ÿ',
                        options: [
                            { text: 'ğŸ’¬ æ¶ˆæ¯åˆ·å±ï¼Œæ¯å‘¨â‰¥2 æ¬¡æ²Ÿé€š', score: 3, risk: 0, icon: 'ğŸ’¬' },
                            { text: 'ğŸ“… å¶å°”å†’æ³¡ï¼Œæ¯æœˆ 1-2 æ¬¡æ²Ÿé€š', score: 1, risk: 0, icon: 'ğŸ“…' },
                            { text: 'ğŸš« å·²è¯»ä¸å›ï¼Œå‡ ä¹ä¸æ²Ÿé€š', score: 0, risk: 0, icon: 'ğŸš«' }
                        ]
                    },
                    {
                        text: 'ä½ å’Œå¯¼å¸ˆä¹‹é—´æ˜¯å¦å‡ºç°è¿‡ "å¤§å‹å°´å°¬ç°åœº"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ¤ æ²¡æœ‰ï¼Œæˆ‘ä»¬æ˜¯ "æœ€ä½³æ‹æ¡£"', score: 3, risk: 0, icon: 'ğŸ¤' },
                            { text: 'ğŸ˜… å¶å°”æœ‰å°æ‘©æ“¦ï¼Œä½†èƒ½ "åŒ–è§£"', score: 1, risk: 0, icon: 'ğŸ˜…' },
                            { text: 'âš¡ ç»å¸¸æœ‰ï¼Œæ„Ÿè§‰åœ¨ "æ¸¡åŠ«"', score: 0, risk: 2, icon: 'âš¡' }
                        ]
                    },
                    {
                        text: 'ä½ çš„å¯¼å¸ˆæ˜¯å“ªç§ "ç±»å‹"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ… é‡‘ç‰Œæ•™ç»ƒï¼šæŒ‡å¯¼è¶…è¯¦ç»†ï¼Œ"æ‰‹æŠŠæ‰‹" æ•™å­¦', score: 2, risk: 0, icon: 'ğŸ…' },
                            { text: 'ğŸ“ æ™®é€šå¯¼å¸ˆï¼šæœ‰æŒ‡å¯¼ï¼Œä½†éœ€è¦è‡ªå·± "æ‚Ÿ"', score: 1, risk: 0, icon: 'ğŸ“' },
                            { text: 'ğŸ•µï¸ ç¥ç§˜å¯¼å¸ˆï¼šåŸºæœ¬è§ä¸åˆ°ï¼Œåƒåœ¨ "ç©å¤±è¸ª"', score: 0, risk: 0, icon: 'ğŸ•µï¸' }
                        ]
                    }
                ],
                achievement: 'å¯¼å­¦é»˜å¥‘ç‹'
            },
            {
                id: 'social',
                title: 'ç¬¬äº”å…³ï¼šäººé™…ç»„é˜Ÿï¼ˆäººé™…äº¤å¾€ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ†)',
                questions: [
                    {
                        text: 'ç”¨ä¸€ç§å¤©æ°”å½¢å®¹ä½ çš„å¯å®¤å…³ç³»ï¼Œæ˜¯å“ªä¸€ç§ï¼Ÿ',
                        options: [
                            { text: 'â˜€ï¸ æ™´å¤©ï¼šé˜³å…‰æ™®ç…§ï¼Œå’Œè°èæ´½', score: 3, risk: 0, icon: 'â˜€ï¸' },
                            { text: 'â›… å¤šäº‘ï¼šå¶å°”é˜´å¤©ï¼Œå¾ˆå¿«æ”¾æ™´', score: 1, risk: 0, icon: 'â›…' },
                            { text: 'ğŸŒ§ï¸ æš´é›¨ï¼šç»å¸¸ "ç”µé—ªé›·é¸£"ï¼Œæƒ³ "é€ƒç¦»"', score: 0, risk: 2, icon: 'ğŸŒ§ï¸' }
                        ]
                    },
                    {
                        text: 'ä½ å¯¹é›†ä½“æ´»åŠ¨çš„ "å¥”èµ´æ¬²" æœ‰å¤šå¼ºï¼Ÿ',
                        options: [
                            { text: 'ğŸƒâ€â™‚ï¸ å†²é”‹é€‰æ‰‹ï¼š"å›¢å»ºç‹‚é­”"ï¼Œå¿…é¡»å‚åŠ ', score: 3, risk: 0, icon: 'ğŸƒâ€â™‚ï¸' },
                            { text: 'ğŸš¶ éšç¼˜é€‰æ‰‹ï¼šçœ‹å¿ƒæƒ…ï¼Œ"å»ä¸å»éƒ½è¡Œ"', score: 1, risk: 0, icon: 'ğŸš¶' },
                            { text: 'ğŸšª å®…å®¶é€‰æ‰‹ï¼šèƒ½ä¸å»å°±ä¸å»ï¼Œ"ç¤¾æ" æ™šæœŸ', score: 0, risk: 0, icon: 'ğŸšª' }
                        ]
                    },
                    {
                        text: 'æœ€è¿‘ä½ æ˜¯å¦ç»å†è¿‡ "äººé™…å…³ç³»å±æœº"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ›¡ï¸ æ²¡æœ‰ï¼Œæˆ‘çš„äººé™…å…³ç³» "ç¨³å¦‚è€ç‹—"', score: 2, risk: 0, icon: 'ğŸ›¡ï¸' },
                            { text: 'ğŸ§© æœ‰ä¸€ç‚¹å°é—®é¢˜ï¼Œä½†èƒ½è‡ªå·±è§£å†³', score: 1, risk: 0, icon: 'ğŸ§©' },
                            { text: 'ğŸ’” é—®é¢˜ä¸¥é‡ï¼Œæ„Ÿè§‰è¦ "ç»äº¤" äº†', score: 0, risk: 0, icon: 'ğŸ’”' }
                        ]
                    }
                ],
                achievement: 'äººé™…å°å¤ªé˜³'
            },
            {
                id: 'family2',
                title: 'ç¬¬å…­å…³ï¼šå®¶åº­åç›¾ï¼ˆå®¶åº­ç”Ÿæ´»ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ†)',
                questions: [
                    {
                        text: 'ä½ å®¶çš„ "ç»æµå°è´¦æœ¬" æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Ÿ',
                        options: [
                            { text: 'ğŸ’° å¯Œè±ªçº§ï¼š"ä¸å·®é’±"ï¼Œæƒ³ä¹°å•¥ä¹°å•¥', score: 3, risk: 0, icon: 'ğŸ’°' },
                            { text: 'âœï¸ å°åº·çº§ï¼šå¤Ÿç”¨ï¼Œä½†è¦ "ç²¾æ‰“ç»†ç®—"', score: 1, risk: 0, icon: 'âœï¸' },
                            { text: 'ğŸ“‰ å›°éš¾çº§ï¼š"æœˆå…‰æ—"ï¼Œéœ€è¦ "å¼€æºèŠ‚æµ"', score: 0, risk: 0, icon: 'ğŸ“‰' }
                        ]
                    },
                    {
                        text: 'æœ€è¿‘å®¶é‡Œæ˜¯å¦å‡ºç° "å‰§æƒ…åè½¬"ï¼Ÿ',
                        options: [
                            { text: 'ğŸŒ¸ å²æœˆé™å¥½ï¼šæ— ä»»ä½•å˜æ•…', score: 3, risk: 0, icon: 'ğŸŒ¸' },
                            { text: 'ğŸŒªï¸ å°æ³¢æ¾œï¼šæœ‰å°å˜åŒ–ä½† "é—®é¢˜ä¸å¤§"', score: 1, risk: 0, icon: 'ğŸŒªï¸' },
                            { text: 'ğŸŒ©ï¸ å¤§é£æš´ï¼šæœ‰é‡å¤§å˜æ•…ï¼Œæ„Ÿè§‰ "å¤©éƒ½è¦å¡Œäº†"', score: 0, risk: 3, icon: 'ğŸŒ©ï¸' }
                        ]
                    },
                    {
                        text: 'ä½ å’Œçˆ¶æ¯çš„èŠå¤©æ¨¡å¼æ˜¯ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“ æ— è¯ä¸è°ˆï¼šæ¯å¤©éƒ½è¦ "è§†é¢‘é€šè¯"', score: 2, risk: 0, icon: 'ğŸ“' },
                            { text: 'ğŸ‘ å¶å°”è”ç³»ï¼šèŠ‚æ—¥é—®å€™ï¼Œ"æŠ¥å–œä¸æŠ¥å¿§"', score: 1, risk: 0, icon: 'ğŸ‘' },
                            { text: 'ğŸš« åŸºæœ¬ä¸èŠï¼š"è¯ä¸æŠ•æœºåŠå¥å¤š"', score: 0, risk: 0, icon: 'ğŸš«' }
                        ]
                    }
                ],
                achievement: 'å®¶åº­å’Œç¦æ˜Ÿ'
            },
            {
                id: 'mental',
                title: 'ç¬¬ä¸ƒå…³ï¼šå¿ƒæƒ…ç»­èˆªï¼ˆå¿ƒç†å¥åº·ç»´åº¦ãƒ»ç»´åº¦åˆ† 12åˆ†+æ ¸å¿ƒé£é™©æ‰£åˆ†ï¼‰',
                questions: [
                    {
                        text: 'æœ€è¿‘ä½ çš„ "å¿ƒæƒ…å¤©æ°”"æ˜¯ä»€ä¹ˆæ ·ï¼Ÿ',
                        options: [
                            { text: 'â˜€ æ™´å¤©ï¼šç§¯æç¨³å®šï¼Œæ­£èƒ½é‡æ»¡æ»¡', score: 4, risk: 0, icon: 'â˜€' },
                            { text: 'â›… å¤šäº‘ï¼šå¶å°”ä½è½/ç„¦è™‘ï¼Œå¾ˆå¿«æ¢å¤', score: 1, risk: 0, icon: 'â›…' },
                            { text: 'ğŸŸ¥ é›¨å¤©ï¼šæŒç»­ emoï¼Œæ„Ÿè§‰ "å¼€å¿ƒä¸èµ·æ¥"', score: 0, risk: 5, icon: 'ğŸŒ§ï¸' }
                        ]
                    },
                    {
                        text: 'ä½ æ˜¯å¦æœ‰ç¡çœ éšœç¢ã€è‡ªæˆ‘å¦å®šç­‰å¿ƒç† "å°ç—‡çŠ¶"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ›¡ï¸ æ²¡æœ‰ï¼Œæˆ‘æ˜¯ "å¿ƒç†å¥åº·å°å«å£«"', score: 4, risk: 0, icon: 'ğŸ›¡ï¸' },
                            { text: 'âš ï¸ å¶å°”å‡ºç°ï¼Œ"å°é—®é¢˜ä¸å½±å“"', score: 1, risk: 0, icon: 'âš ï¸' },
                            { text: 'ğŸ¥ é¢‘ç¹å‡ºç°ï¼Œæ„Ÿè§‰éœ€è¦ "çœ‹åŒ»ç”Ÿ"', score: 0, risk: 0, icon: 'ğŸ¥' }
                        ]
                    },
                    {
                        text: 'ç”Ÿæ´»éš¾æ±æ—¶ï¼Œä½ æ˜¯å¦æœ‰è¿‡ "æƒ³å½»åº•èººå¹³"çš„å¿µå¤´ï¼Ÿ',
                        options: [
                            { text: 'ğŸ’ª åšå¼ºæˆ˜å£«ï¼šä»æ¥æ²¡æœ‰', score: 4, risk: 0, icon: 'ğŸ’ª' },
                            { text: 'ğŸ˜´ çŸ­æš‚ç–²æƒ«ï¼šå¶å°”é—ªè¿‡ä½†å¾ˆå¿«æ¸…é†’', score: 1, risk: 0, icon: 'ğŸ˜´' },
                            { text: 'ğŸš¨ çº¢è‰²è­¦æŠ¥ï¼šé¢‘ç¹å‡ºç°ï¼Œæ„Ÿè§‰ "æ’‘ä¸ä¸‹å»"', score: 0, risk: 10, icon: 'ğŸš¨' }
                        ]
                    }
                ],
                note: 'æœ¬å…³æç¤ºï¼šé€‰æ‹©çº¢è‰²è­¦æŠ¥é€‰é¡¹æ— éœ€ææ…Œï¼Œå­¦æ ¡å°†ä¸ºä½ å¯¹æ¥ä¸“ä¸šå¿ƒç†å¸®æ‰¶'
            },
            {
                id: 'career',
                title: 'ç¬¬å…«å…³ï¼šèŒä¸šæ¢è·¯ï¼ˆèŒä¸šå‘å±•ç»´åº¦ãƒ»ç»´åº¦åˆ† 8åˆ†)',
                questions: [
                    {
                        text: 'ä½ çš„äººç”Ÿå‰§æœ¬æ€ï¼ŒèŒä¸šçº¿è§£é”åˆ°å“ªä¸€å¹•ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“œ ç¬¬ä¸€å¹•ï¼šè§„åˆ’æ¸…æ™°ä¸”æœ‰è¡ŒåŠ¨', score: 3, risk: 0, icon: 'ğŸ“œ' },
                            { text: 'ğŸš§ ç¬¬äºŒå¹•ï¼šæœ‰åˆæ­¥è§„åˆ’ä½†æ— è¡ŒåŠ¨', score: 1, risk: 0, icon: 'ğŸš§' },
                            { text: 'â“ ç¬¬ä¸‰å¹•ï¼šç©ºç™½å‰§æœ¬ï¼Œå®Œå…¨æ— è§„åˆ’', score: 0, risk: 0, icon: 'â“' }
                        ]
                    },
                    {
                        text: 'ä½ çš„æ±‚èŒè·¯ä¸Šé‡åˆ°è¿‡å¤šå°‘ "æš´å‡»"ï¼Ÿ',
                        options: [
                            { text: 'ğŸ® ä¸€è·¯å¼€æŒ‚ï¼šæ— æŒ«æŠ˜ï¼Œofferæ‹¿åˆ°æ‰‹è½¯', score: 3, risk: 0, icon: 'ğŸ®' },
                            { text: 'ğŸ”„ åŸåœ°å¤æ´»ï¼š1-2æ¬¡æŒ«æŠ˜ï¼Œèƒ½å¿«é€Ÿè°ƒæ•´', score: 1, risk: 0, icon: 'ğŸ”„' },
                            { text: 'ğŸ’” å¿ƒæ€å´©äº†ï¼šå¤šæ¬¡å¤±è´¥ï¼Œå·²äº§ç”Ÿå¿ƒç†é˜´å½±', score: 0, risk: 0, icon: 'ğŸ’”' }
                        ]
                    },
                    {
                        text: 'ä½ æ˜¯å¦é”™è¿‡äº† "ä¸Šå²¸"å…³é”®çª—å£æœŸï¼Ÿ',
                        options: [
                            { text: 'ğŸ¯ æ²¡æœ‰ï¼Œæˆ‘æ˜¯ "offeræ”¶å‰²æœº"', score: 2, risk: 0, icon: 'ğŸ¯' },
                            { text: 'â³ é”™è¿‡äº†ä¸€æ¬¡ï¼Œä½†è¿˜æœ‰æœºä¼š', score: 1, risk: 0, icon: 'â³' },
                            { text: 'âŒ å…¨é”™è¿‡äº†ï¼Œæ„Ÿè§‰è¦ "å¤±ä¸š"', score: 0, risk: 2, icon: 'âŒ' }
                        ]
                    }
                ],
                achievement: 'èŒä¸šè§„åˆ’å¸ˆ'
            },
            {
                id: 'risk',
                title: 'ç¬¬ä¹å…³ï¼šé£é™©æ’æŸ¥ï¼ˆé‡ç‚¹å…³æ³¨ç»´åº¦ãƒ»ç»´åº¦åˆ† 6åˆ†)',
                questions: [
                    {
                        text: 'ä½ æ˜¯å¦æœ‰è¿‡ "è¿è§„æ“ä½œ"è¢«è­¦å‘Šçš„ç»å†ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“ ä¸‰å¥½å­¦ç”Ÿï¼šæ— ä»»ä½•å¤„åˆ†', score: 3, risk: 0, icon: 'ğŸ“' },
                            { text: 'âš ï¸ ä¸€æ¬¡è­¦å‘Šï¼šæ›¾æœ‰å•æ¬¡å¤„åˆ†', score: 1, risk: 0, icon: 'âš ï¸' },
                            { text: 'ğŸš« é»‘åå•ï¼šå¤šæ¬¡è¿çºª', score: 0, risk: 3, icon: 'ğŸš«' }
                        ]
                    },
                    {
                        text: 'ä½ æ˜¯ "ç¥ç§˜å¤±è¸ªäººå£"å—ï¼Ÿ',
                        options: [
                            { text: 'ğŸ“ æŒ‰æ—¶æ‰“å¡ï¼šæ ¡å†…ä½å®¿ï¼Œå¯éšæ—¶è”ç³»', score: 3, risk: 0, icon: 'ğŸ“' },
                            { text: 'ğŸ“± å¶å°”å¤±è”ï¼šæ ¡å¤–ä½å®¿ä½†èƒ½è”ç³»ä¸Š', score: 1, risk: 0, icon: 'ğŸ“±' },
                            { text: 'ğŸ‰ ç¥é¾™è§é¦–ä¸è§å°¾ï¼šé•¿æœŸæ ¡å¤–ä½å®¿ä¸”éš¾è”ç³»', score: 0, risk: 0, icon: 'ğŸ‰' }
                        ]
                    }
                ]
            },
            {
                id: 'hidden',
                title: 'ç¬¬åå…³ï¼šéšè—å…³å¡ï¼ˆå…¶ä»–è¡¥å……ç»´åº¦ãƒ»ä¸è®¡åˆ†)',
                questions: [
                    {
                        text: 'ä½ æ˜¯å¦æœ‰å…¶ä»– "éšè—å…³å¡"éœ€è¦è§£é”ï¼Ÿ',
                        options: [
                            { text: 'âŒ æ— éšè—å…³å¡ï¼ˆæ— å›°éš¾ï¼‰', score: 0, risk: 0, icon: 'âŒ' },
                            { 
                                text: 'âœ¨ å°éšè—å…³ï¼ˆæœ‰å°‘é‡æœªæåŠå›°éš¾ï¼‰', 
                                score: 0, 
                                risk: 0, 
                                icon: 'âœ¨',
                                input: true
                            },
                            { 
                                text: 'ğŸ”¥ hardæ¨¡å¼ï¼ˆæœ‰è¾ƒå¤šå›°éš¾ï¼‰', 
                                score: 0, 
                                risk: 0, 
                                icon: 'ğŸ”¥',
                                input: true
                            }
                        ]
                    },
                    {
                        text: 'ä½ æ„¿æ„è®© "å¿ƒçµå¯¼å¸ˆ"å¸®ä½ è§£å‹å—ï¼Ÿ',
                        options: [
                            { text: 'â˜• éå¸¸æ„¿æ„ï¼Œæ€¥éœ€ "å¿ƒçµæŒ‰æ‘©"', score: 0, risk: 0, icon: 'â˜•' },
                            { text: 'ğŸ‘¤ æ„¿æ„ï¼Œä½†æœ‰ç‚¹ "ç¤¾æ"', score: 0, risk: 0, icon: 'ğŸ‘¤' },
                            { text: 'ğŸ¤« æš‚ä¸æ„¿æ„ï¼Œæƒ³å…ˆ "é™é™"', score: 0, risk: 0, icon: 'ğŸ¤«' }
                        ]
                    },
                    {
                        text: 'å¦‚æœå¯ä»¥ "è®¸æ„¿"ï¼Œä½ æœ€æƒ³è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰',
                        options: [
                            { text: 'ğŸ“š å­¦ä¸šè¾…å¯¼ï¼šæˆ‘éœ€è¦ "å­¦ä¹ å¤–æŒ‚"', score: 0, risk: 0, icon: 'ğŸ“š', multi: true },
                            { text: 'ğŸ§  å¿ƒç†ç–å¯¼ï¼šæˆ‘éœ€è¦ "å¿ƒçµé¸¡æ±¤"', score: 0, risk: 0, icon: 'ğŸ§ ', multi: true },
                            { text: 'ğŸ’¼ å°±ä¸šæŒ‡å¯¼ï¼šæˆ‘éœ€è¦ "æ±‚èŒç§˜ç±"', score: 0, risk: 0, icon: 'ğŸ’¼', multi: true },
                            { text: 'ğŸ’° ç»æµå¸®æ‰¶ï¼šæˆ‘éœ€è¦ "ç”Ÿæ´»è¡¥ç»™"', score: 0, risk: 0, icon: 'ğŸ’°', multi: true },
                            { 
                                text: 'ğŸ› ï¸ å…¶ä»–å¸®åŠ©', 
                                score: 0, 
                                risk: 0, 
                                icon: 'ğŸ› ï¸', 
                                multi: true,
                                input: true
                            }
                        ],
                        multiSelect: true
                    }
                ]
            }
        ];

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            currentStage: 0,
            currentQuestion: 0,
            score: 20, // åŸºç¡€åˆ†20
            riskDeduction: 0,
            selections: [],
            userInfo: {
                studentId: '',
                name: '',
                gender: '',
                grade: '',
                college: '',
                major: ''
            },
            achievements: {
                'family-achievement': false,
                'ideology-achievement': false,
                'research-achievement': false,
                'mentor-achievement': false,
                'social-achievement': false,
                'career-achievement': false
            }
        };

        // å­˜å‚¨æ‰€æœ‰æäº¤çš„æ•°æ®
        let allSubmissions = JSON.parse(localStorage.getItem('questionnaire_submissions') || '[]');

        // DOMå…ƒç´ 
        const startScreen = document.getElementById('start-screen');
        const infoScreen = document.getElementById('info-screen');
        const questionScreen = document.getElementById('question-screen');
        const resultScreen = document.getElementById('result-screen');
        const dataCollectionScreen = document.getElementById('data-collection-screen');
        const viewDataScreen = document.getElementById('view-data-screen');
        const stageTitle = document.getElementById('stage-title');
        const questionsContainer = document.getElementById('questions-container');
        const nextBtn = document.getElementById('next-btn');
        const noteContainer = document.getElementById('note-container');
        const finalScore = document.getElementById('final-score');
        const survivalLevel = document.getElementById('survival-level');
        const reportText = document.getElementById('report-text');
        const currentStageEl = document.getElementById('current-stage');
        const currentScoreEl = document.getElementById('current-score');
        const progressBar = document.getElementById('progress-bar');

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            document.getElementById('start-btn').addEventListener('click', showInfoScreen);
            document.getElementById('info-next-btn').addEventListener('click', startQuiz);
            document.getElementById('next-btn').addEventListener('click', nextStage);
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            document.getElementById('submit-data-btn').addEventListener('click', submitData);
            document.getElementById('copy-data-btn').addEventListener('click', copyData);
            document.getElementById('download-json-btn').addEventListener('click', downloadJSON);
            document.getElementById('view-all-btn').addEventListener('click', viewAllData);
            document.getElementById('export-csv-btn').addEventListener('click', exportCSV);
            document.getElementById('back-to-start-btn').addEventListener('click', () => {
                dataCollectionScreen.classList.remove('active');
                startScreen.classList.add('active');
            });
            document.getElementById('back-to-data-btn').addEventListener('click', () => {
                viewDataScreen.classList.remove('active');
                dataCollectionScreen.classList.add('active');
            });
            
            // æ€§åˆ«é€‰æ‹©
            document.querySelectorAll('.option[data-value]').forEach(option => {
                option.addEventListener('click', function() {
                    // æ¸…é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
                    document.querySelectorAll('.option[data-value]').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    gameState.userInfo.gender = this.dataset.value;
                    
                    // æ›´æ–°é¢„è§ˆ
                    document.getElementById('preview-role').textContent = 
                        this.dataset.value + 'ç ”ç©¶ç”Ÿ';
                    
                    // æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€å…³
                    validateInfoForm();
                });
            });
            
            // è¡¨å•è¾“å…¥éªŒè¯
            document.getElementById('student-id').addEventListener('input', function() {
                validateStudentId();
                updatePreview();
                validateInfoForm();
            });
            
            document.getElementById('name').addEventListener('input', function() {
                validateInfoForm();
            });
            
            document.getElementById('grade').addEventListener('change', function() {
                updatePreview();
                validateInfoForm();
            });
            
            document.getElementById('college').addEventListener('input', function() {
                updatePreview();
                validateInfoForm();
            });
            
            document.getElementById('major').addEventListener('input', function() {
                updatePreview();
                validateInfoForm();
            });
        }

        // æ›´æ–°é¢„è§ˆä¿¡æ¯
        function updatePreview() {
            const college = document.getElementById('college').value || 'æœªè®¾ç½®';
            const major = document.getElementById('major').value || 'æœªè®¾ç½®';
            const grade = document.getElementById('grade').value || 'æœªè®¾ç½®';
            
            document.getElementById('preview-college-major').textContent = `${college} - ${major}`;
            document.getElementById('preview-grade').textContent = grade;
        }

        // éªŒè¯å­¦å·ï¼ˆ8ä½ï¼‰
        function validateStudentId() {
            const studentId = document.getElementById('student-id').value;
            const errorEl = document.getElementById('student-id-error');
            
            if (studentId && studentId.length === 8 && /^\d+$/.test(studentId)) {
                errorEl.style.display = 'none';
                return true;
            } else {
                errorEl.style.display = 'block';
                return false;
            }
        }

        // éªŒè¯è¡¨å•
        function validateInfoForm() {
            const studentIdValid = validateStudentId();
            const name = document.getElementById('name').value;
            const grade = document.getElementById('grade').value;
            const college = document.getElementById('college').value;
            const major = document.getElementById('major').value;
            const gender = gameState.userInfo.gender;
            
            const isValid = studentIdValid && 
                           name.trim() !== '' && 
                           grade.trim() !== '' && 
                           college.trim() !== '' && 
                           major.trim() !== '' && 
                           gender;
            
            document.getElementById('info-next-btn').disabled = !isValid;
            return isValid;
        }

        // æ˜¾ç¤ºä¿¡æ¯å¡«å†™å±å¹•
        function showInfoScreen() {
            startScreen.classList.remove('active');
            infoScreen.classList.add('active');
        }

        // å¼€å§‹é—®å·
        function startQuiz() {
            if (!validateInfoForm()) return;
            
            // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
            gameState.userInfo.studentId = document.getElementById('student-id').value;
            gameState.userInfo.name = document.getElementById('name').value;
            gameState.userInfo.grade = document.getElementById('grade').value;
            gameState.userInfo.college = document.getElementById('college').value;
            gameState.userInfo.major = document.getElementById('major').value;
            
            infoScreen.classList.remove('active');
            questionScreen.classList.add('active');
            gameState.currentStage = 0;
            gameState.currentQuestion = 0;
            gameState.score = 20;
            gameState.riskDeduction = 0;
            gameState.selections = [];
            gameState.achievements = {
                'family-achievement': false,
                'ideology-achievement': false,
                'research-achievement': false,
                'mentor-achievement': false,
                'social-achievement': false,
                'career-achievement': false
            };
            updateProgress();
            loadStage();
        }

        // æ›´æ–°è¿›åº¦æ¡å’Œåˆ†æ•°æ˜¾ç¤º
        function updateProgress() {
            const totalStages = quizData.length;
            const progress = ((gameState.currentStage) / totalStages) * 100;
            progressBar.style.width = `${progress}%`;
            currentStageEl.textContent = gameState.currentStage + 1;
            currentScoreEl.textContent = gameState.score - gameState.riskDeduction;
        }

        // åŠ è½½å½“å‰å…³å¡
        function loadStage() {
            const stage = quizData[gameState.currentStage];
            stageTitle.textContent = stage.title;
            
            // æ¸…ç©ºé—®é¢˜å®¹å™¨
            questionsContainer.innerHTML = '';
            
            // æ˜¾ç¤ºnoteï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            if (stage.note) {
                noteContainer.textContent = stage.note;
                noteContainer.style.display = 'block';
            } else {
                noteContainer.style.display = 'none';
            }
            
            // åˆ›å»ºé—®é¢˜
            const question = stage.questions[gameState.currentQuestion];
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `<p>${question.text}</p>`;
            
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';
            
            // å¤„ç†å¤šé€‰é—®é¢˜
            if (question.multiSelect) {
                optionsDiv.className += ' multi-select';
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'multi-option';
                    optionDiv.innerHTML = `
                        <div class="option-label">
                            <span class="option-icon">${option.icon}</span>
                            <span>${option.text}</span>
                        </div>
                    `;
                    optionDiv.dataset.index = index;
                    optionDiv.dataset.selected = 'false';
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    optionDiv.addEventListener('click', function() {
                        const isSelected = this.dataset.selected === 'true';
                        this.dataset.selected = isSelected ? 'false' : 'true';
                        this.classList.toggle('selected', !isSelected);
                        checkNextButton();
                    });
                    
                    optionsDiv.appendChild(optionDiv);
                });
            } 
            // å•é€‰é—®é¢˜
            else {
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.innerHTML = `
                        <div class="option-label">
                            <span class="option-icon">${option.icon}</span>
                            <span>${option.text}</span>
                        </div>
                    `;
                    optionDiv.dataset.index = index;
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    optionDiv.addEventListener('click', function() {
                        // æ¸…é™¤åŒä¸€é—®é¢˜çš„å…¶ä»–é€‰é¡¹é€‰æ‹©
                        document.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        
                        // æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€é¢˜
                        checkNextButton();
                    });
                    
                    optionsDiv.appendChild(optionDiv);
                });
            }
            
            // æ·»åŠ è¾“å…¥æ¡†ï¼ˆå¦‚æœéœ€è¦ï¼‰
            if (question.options.some(opt => opt.input)) {
                const inputDiv = document.createElement('div');
                inputDiv.className = 'hidden-input-container';
                inputDiv.innerHTML = `
                    <input type="text" class="hidden-input" placeholder="è¯·æè¿°ä½ çš„å›°éš¾...">
                `;
                optionsDiv.appendChild(inputDiv);
            }
            
            questionDiv.appendChild(optionsDiv);
            questionsContainer.appendChild(questionDiv);
            
            // é‡ç½®nextæŒ‰é’®çŠ¶æ€
            nextBtn.disabled = true;
        }

        // æ£€æŸ¥æ˜¯å¦å¯ä»¥ç‚¹å‡»ä¸‹ä¸€å…³æŒ‰é’®
        function checkNextButton() {
            const stage = quizData[gameState.currentStage];
            const question = stage.questions[gameState.currentQuestion];
            
            // å¤šé€‰é—®é¢˜ï¼šè‡³å°‘é€‰æ‹©ä¸€ä¸ª
            if (question.multiSelect) {
                const selected = document.querySelectorAll('.multi-option[data-selected="true"]');
                nextBtn.disabled = selected.length === 0;
                return;
            }
            
            // å•é€‰é—®é¢˜ï¼šæœ‰é€‰é¡¹è¢«é€‰æ‹©
            const selectedOption = document.querySelector('.option.selected');
            nextBtn.disabled = !selectedOption;
        }

        // è¿›å…¥ä¸‹ä¸€å…³å¡
        function nextStage() {
            const stage = quizData[gameState.currentStage];
            const question = stage.questions[gameState.currentQuestion];
            
            // å¤„ç†é€‰æ‹©
            if (question.multiSelect) {
                const selectedOptions = document.querySelectorAll('.multi-option[data-selected="true"]');
                selectedOptions.forEach(optionEl => {
                    const index = parseInt(optionEl.dataset.index);
                    const option = question.options[index];
                    gameState.score += option.score;
                    gameState.riskDeduction += option.risk;
                });
            } else {
                const selectedOption = document.querySelector('.option.selected');
                if (selectedOption) {
                    const index = parseInt(selectedOption.dataset.index);
                    const option = question.options[index];
                    gameState.score += option.score;
                    gameState.riskDeduction += option.risk;
                }
            }
            
            // è®°å½•é€‰æ‹©
            const selectionData = {
                stage: gameState.currentStage,
                stageId: stage.id,
                stageTitle: stage.title,
                question: gameState.currentQuestion,
                questionText: question.text,
                answers: []
            };
            
            if (question.multiSelect) {
                const selectedIndices = Array.from(document.querySelectorAll('.multi-option[data-selected="true"]'))
                    .map(el => parseInt(el.dataset.index));
                selectionData.answers = selectedIndices.map(idx => ({
                    index: idx,
                    text: question.options[idx].text,
                    score: question.options[idx].score,
                    risk: question.options[idx].risk
                }));
            } else {
                const selectedIndex = parseInt(document.querySelector('.option.selected')?.dataset.index);
                if (!isNaN(selectedIndex)) {
                    selectionData.answers = [{
                        index: selectedIndex,
                        text: question.options[selectedIndex].text,
                        score: question.options[selectedIndex].score,
                        risk: question.options[selectedIndex].risk
                    }];
                }
            }
            
            gameState.selections.push(selectionData);
            
            // æ£€æŸ¥æˆå°±ï¼ˆåœ¨å®Œæˆæ•´ä¸ªå…³å¡æ—¶æ£€æŸ¥ï¼‰
            if (gameState.currentQuestion === stage.questions.length - 1) {
                // è®¡ç®—å½“å‰å…³å¡å¾—åˆ†
                let stageScore = 0;
                let maxPossibleScore = 0;
                
                for (let i = 0; i < stage.questions.length; i++) {
                    const q = stage.questions[i];
                    
                    // è®¡ç®—è¯¥é—®é¢˜çš„æœ€é«˜å¯èƒ½å¾—åˆ†
                    let questionMaxScore = Math.max(...q.options.map(o => o.score));
                    maxPossibleScore += questionMaxScore;
                    
                    // è®¡ç®—ç”¨æˆ·åœ¨è¯¥é—®é¢˜çš„å®é™…å¾—åˆ†
                    const sel = gameState.selections.find(s => 
                        s.stage === gameState.currentStage && s.question === i);
                    
                    if (sel && !q.multiSelect) {
                        const option = q.options[sel.answers[0].index];
                        stageScore += option.score;
                    } else if (sel && q.multiSelect) {
                        sel.answers.forEach(answer => {
                            const option = q.options[answer.index];
                            stageScore += option.score;
                        });
                    }
                }
                
                // æ£€æŸ¥æˆå°± - ç”¨æˆ·å¾—åˆ†ç­‰äºæœ€é«˜å¯èƒ½å¾—åˆ†
                if (stage.achievement && stageScore === maxPossibleScore) {
                    const achievementId = stage.id + '-achievement';
                    gameState.achievements[achievementId] = true;
                }
            }
            
            // ç§»åŠ¨åˆ°ä¸‹ä¸€é—®é¢˜/å…³å¡
            gameState.currentQuestion++;
            if (gameState.currentQuestion >= stage.questions.length) {
                gameState.currentQuestion = 0;
                gameState.currentStage++;
                
                // æ£€æŸ¥æ˜¯å¦å®Œæˆæ‰€æœ‰å…³å¡
                if (gameState.currentStage >= quizData.length) {
                    showResults();
                    return;
                }
            }
            
            updateProgress();
            loadStage();
        }

        // æ˜¾ç¤ºç»“æœ
        function showResults() {
            questionScreen.classList.remove('active');
            resultScreen.classList.add('active');
            
            // è®¡ç®—æœ€ç»ˆå¾—åˆ†ï¼ˆé™åˆ¶èŒƒå›´ï¼‰
            const totalScore = Math.max(0, Math.min(100, gameState.score - gameState.riskDeduction));
            finalScore.textContent = totalScore;
            
            // ç¡®å®šç”Ÿå­˜ç­‰çº§
            let level, report;
            if (totalScore >= 80) {
                level = 'ç”Ÿå­˜è¾¾äºº';
                report = 'ä½ çš„æ ¡å›­ç”Ÿå­˜çŠ¶æ€ä¼˜ç§€ï¼åŸºç¡€åˆ†å’Œå„ç»´åº¦å¾—åˆ†é«˜ï¼Œé£é™©ä½ã€‚ç»§ç»­ä¿æŒç§¯æå¿ƒæ€ï¼Œå­¦æ ¡å°†ä¸ºä½ æä¾›å‘å±•æ€§æ”¯æŒã€‚';
            } else if (totalScore >= 60) {
                level = 'éœ€å…³æ³¨';
                report = 'ä½ çš„çŠ¶æ€åŸºæœ¬ç¨³å®šï¼Œä½†å­˜åœ¨å°‘é‡é£é™©ç‚¹ã€‚å»ºè®®ä¸»åŠ¨å‚ä¸å­¦æ ¡å¿ƒç†æ´»åŠ¨ï¼ŒåŠæ—¶ä¸å¯¼å¸ˆæ²Ÿé€šã€‚';
            } else if (totalScore >= 40) {
                level = 'é«˜é£é™©';
                report = 'æ£€æµ‹åˆ°ä¸­åº¦é£é™©ï¼Œéœ€é‡ç‚¹å…³æ³¨ã€‚å­¦æ ¡å¿ƒç†ä¸­å¿ƒå°†ä¸»åŠ¨è”ç³»ä½ ï¼Œæä¾›ä¸€å¯¹ä¸€æ”¯æŒæœåŠ¡ã€‚';
            } else {
                level = 'ç´§æ€¥å¹²é¢„';
                report = 'æ£€æµ‹åˆ°é«˜é£é™©ä¿¡å·ï¼Œè¯·ç«‹å³è”ç³»å­¦æ ¡å¿ƒç†ä¸­å¿ƒï¼ˆç”µè¯ï¼šXXX-XXXXXXXï¼‰ã€‚ä¸“ä¸šå›¢é˜Ÿå°†24å°æ—¶å†…è·Ÿè¿›ï¼Œä¸ºä½ æä¾›ç´§æ€¥å¸®åŠ©ã€‚';
            }
            
            survivalLevel.textContent = level;
            reportText.innerHTML = report + `<br><br>ç»´åº¦å¾—åˆ†ï¼š${gameState.score - 20}åˆ† | é£é™©æ‰£åˆ†ï¼š${gameState.riskDeduction}åˆ†`;
            
            // æ˜¾ç¤ºå·²è§£é”çš„å¾½ç« ï¼Œéšè—æœªè§£é”çš„å¾½ç« 
            Object.keys(gameState.achievements).forEach(key => {
                const achievementEl = document.getElementById(key);
                if (gameState.achievements[key]) {
                    achievementEl.classList.add('unlocked');
                } else {
                    achievementEl.classList.remove('unlocked');
                }
            });
        }

        // æäº¤æ•°æ®
        function submitData() {
            // æ„å»ºå®Œæ•´çš„æ•°æ®å¯¹è±¡
            const submissionData = {
                timestamp: new Date().toISOString(),
                timestampFormatted: new Date().toLocaleString('zh-CN'),
                userInfo: gameState.userInfo,
                score: gameState.score,
                riskDeduction: gameState.riskDeduction,
                totalScore: Math.max(0, Math.min(100, gameState.score - gameState.riskDeduction)),
                survivalLevel: document.getElementById('survival-level').textContent,
                achievements: gameState.achievements,
                selections: gameState.selections
            };
            
            // æ·»åŠ åˆ°æ‰€æœ‰æäº¤æ•°æ®ä¸­
            allSubmissions.push(submissionData);
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('questionnaire_submissions', JSON.stringify(allSubmissions));
            
            // æ˜¾ç¤ºæ•°æ®æ”¶é›†å±å¹•
            resultScreen.classList.remove('active');
            dataCollectionScreen.classList.add('active');
            
            // æ˜¾ç¤ºæäº¤ä¿¡æ¯
            document.getElementById('data-student-id').textContent = gameState.userInfo.studentId;
            document.getElementById('data-name').textContent = gameState.userInfo.name;
            document.getElementById('data-score').textContent = submissionData.totalScore;
            document.getElementById('data-level').textContent = submissionData.survivalLevel;
            document.getElementById('data-time').textContent = submissionData.timestampFormatted;
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            const successAlert = document.getElementById('success-alert');
            successAlert.style.display = 'block';
            
            // æ˜¾ç¤ºæ•°æ®é¢„è§ˆ
            document.getElementById('data-preview').textContent = JSON.stringify(submissionData, null, 2);
            
            // æ˜¾ç¤ºä¿¡æ¯æç¤º
            document.getElementById('info-alert').style.display = 'block';
        }

        // å¤åˆ¶æ•°æ®åˆ°å‰ªè´´æ¿
        function copyData() {
            const dataText = document.getElementById('data-preview').textContent;
            navigator.clipboard.writeText(dataText).then(() => {
                const alert = document.getElementById('error-alert');
                alert.textContent = 'âœ… æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
                alert.className = 'alert success';
                alert.style.display = 'block';
                
                // 3ç§’åéšè—
                setTimeout(() => {
                    alert.style.display = 'none';
                }, 3000);
            }).catch(err => {
                const alert = document.getElementById('error-alert');
                alert.textContent = 'âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä¸Šé¢çš„æ•°æ®';
                alert.className = 'alert error';
                alert.style.display = 'block';
            });
        }

        // ä¸‹è½½JSONæ–‡ä»¶
        function downloadJSON() {
            const submissionData = {
                timestamp: new Date().toISOString(),
                userInfo: gameState.userInfo,
                score: gameState.score,
                riskDeduction: gameState.riskDeduction,
                totalScore: Math.max(0, Math.min(100, gameState.score - gameState.riskDeduction)),
                survivalLevel: document.getElementById('survival-level').textContent,
                achievements: gameState.achievements,
                selections: gameState.selections
            };
            
            const dataStr = JSON.stringify(submissionData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `é—®å·æ•°æ®_${gameState.userInfo.studentId}_${gameState.userInfo.name}_${new Date().getTime()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // æŸ¥çœ‹æ‰€æœ‰æ•°æ®
        function viewAllData() {
            dataCollectionScreen.classList.remove('active');
            viewDataScreen.classList.add('active');
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('total-submissions').textContent = allSubmissions.length;
            
            if (allSubmissions.length > 0) {
                const totalScore = allSubmissions.reduce((sum, sub) => sum + sub.totalScore, 0);
                const avgScore = (totalScore / allSubmissions.length).toFixed(1);
                document.getElementById('average-score').textContent = avgScore;
                
                const highRiskCount = allSubmissions.filter(sub => sub.totalScore < 40).length;
                document.getElementById('high-risk-count').textContent = highRiskCount;
                
                // æ˜¾ç¤ºæ‰€æœ‰æ•°æ®
                document.getElementById('all-data-preview').textContent = JSON.stringify(allSubmissions, null, 2);
            }
        }

        // å¯¼å‡ºCSVæ–‡ä»¶
        function exportCSV() {
            if (allSubmissions.length === 0) {
                alert('æ²¡æœ‰æ•°æ®å¯å¯¼å‡º');
                return;
            }
            
            // åˆ›å»ºCSVæ ‡é¢˜è¡Œ
            let csvContent = "å­¦å·,å§“å,æ€§åˆ«,å¹´çº§,å­¦é™¢,ä¸“ä¸š,æ€»åˆ†,ç”Ÿå­˜ç­‰çº§,æäº¤æ—¶é—´\n";
            
            // æ·»åŠ æ•°æ®è¡Œ
            allSubmissions.forEach(sub => {
                const row = [
                    sub.userInfo.studentId,
                    sub.userInfo.name,
                    sub.userInfo.gender,
                    sub.userInfo.grade,
                    sub.userInfo.college,
                    sub.userInfo.major,
                    sub.totalScore,
                    sub.survivalLevel,
                    sub.timestampFormatted
                ].map(field => `"${field}"`).join(',');
                
                csvContent += row + '\n';
            });
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', `é—®å·æ•°æ®æ±‡æ€»_${new Date().getTime()}.csv`);
            link.click();
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            resultScreen.classList.remove('active');
            startScreen.classList.add('active');
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            initGame();
            
            // ä¸ºé—®é¢˜å®¹å™¨æ·»åŠ äº‹ä»¶å§”æ‰˜ï¼ˆå¤„ç†åŠ¨æ€ç”Ÿæˆçš„é€‰é¡¹ï¼‰
            questionsContainer.addEventListener('click', function(e) {
                const option = e.target.closest('.option, .multi-option');
                if (option) {
                    // å¯¹äºå•é€‰ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªæ˜¯é€‰ä¸­çŠ¶æ€
                    if (!option.classList.contains('multi-option')) {
                        document.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        option.classList.add('selected');
                    }
                    checkNextButton();
                }
            });
        });
    </script>
</body>
</html>
